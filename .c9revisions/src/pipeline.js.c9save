{"ts":1358887749350,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1358888541404,"patch":[[{"diffs":[[1,"function Pipeline() {\n    var pipes = [],\n        starts = [],\n        stops = [],\n        once = [],\n        created = false;\n        \n    var pipeline = {},\n        ret = {};\n        \n    var queue = [],\n        running = false;\n        \n    function ensureNotCreated()\n    {\n        if(created) throw new Error('Pipeline already created.');\n    }\n        \n    function pipeAsync(pipe) {\n        ensureNotCreated();\n        \n        pipes.push(\n            function runPipe(item, cb) {\n                pipe.apply(this, [item.state, cb]);\n            }\n        );\n        return ret;\n    }\n    \n    function pipe(simplePipe) {\n        return pipeAsync(\n            function runSimplePipe(state, cb) {\n                simplePipe.apply(this, [state]);\n                cb();\n            }\n        );\n    }\n    \n    function startAsync(start) {\n        ensureNotCreated();\n        \n        starts.push(start);\n        return ret;\n    }\n    \n    function start(simpleStart) {\n        return startAsync(\n            function runSimpleStart(cb) {\n                simpleStart.apply(this, []);\n                cb();\n            }\n        );\n    }\n    \n    function stopAsync(stop) {\n        ensureNotCreated();\n        \n        stops.push(stop);\n        return ret;\n    }\n    \n    function stop(simpleStop) {\n        return stopAsync(\n            function runSimpleStop(cb) {\n                simpleStop.apply(this, []);\n                cb();\n            }\n        );\n    }\n}"]],"start1":0,"start2":0,"length1":0,"length2":1466}]],"length":1466,"saved":false}
{"ts":1358888916742,"patch":[[{"diffs":[[0,"   \n"],[-1,"    var pipeline = {},\n        ret = {};\n        \n"],[0,"    "]],"start1":132,"start2":132,"length1":58,"length2":8},{"diffs":[[0,"var queue = [],\n"],[1,""],[0,"        running "]],"start1":140,"start2":140,"length1":32,"length2":32},{"diffs":[[0,"\n        return "],[-1,"ret"],[1,"this"],[0,";\n    }\n    \n   "]],"start1":514,"start2":514,"length1":35,"length2":36},{"diffs":[[0,"\n        return "],[-1,"ret"],[1,"this"],[0,";\n    }\n    \n   "]],"start1":857,"start2":857,"length1":35,"length2":36},{"diffs":[[0," return "],[-1,"ret"],[1,"this"],[0,";\n    }\n"]],"start1":1197,"start2":1197,"length1":19,"length2":20},{"diffs":[[0,";\n            }\n"],[-1,""],[0,"        );\n    }"]],"start1":1385,"start2":1385,"length1":32,"length2":32},{"diffs":[[0,";\n    }\n"],[1,"    \n    function create() {\n        created = true;\n        \n        function commit(object) {\n            queue.push({state: object});\n            run();\n        }\n        \n        function once(cb) {\n            window.setTimeout(\n                function applyOnce() {\n                    if(!running) cb();\n                    once.push(cb);\n                },\n                1\n            );\n        }\n        \n        commit.once = once;\n        return commit;\n    }\n    \n    return {\n        pipeAsync: pipeAsync,\n        pipe: pipe,\n        startAsync: startAsync,\n        start: start,\n        stopAsync: stopAsync,\n        stop: stop,\n        create: create\n    }\n"],[0,"}"]],"start1":1410,"start2":1410,"length1":9,"length2":685}]],"length":2095,"saved":false}
{"ts":1358889633046,"patch":[[{"diffs":[[0,"false;\n        \n"],[1,"    var has = Object.prototype.hasOwnProperty ?\n        function has(obj, name) {\n            return obj.hasOwnProperty(name);\n        } : function has(obj, name) {\n            var proto = obj.__proto__ || obj.constructor.prototype;\n            return (name in this) && (!(name in proto) || proto[name] !== this[name]);\n        };\n        \n"],[0,"    function ens"]],"start1":174,"start2":174,"length1":32,"length2":372},{"diffs":[[0,"\n    }\n    \n"],[1,"    function run() {\n        if(running) return;\n        \n        running = true;\n        execute({\n            cb: runItem,\n            list: starts\n        });\n    }\n    \n    function execute(settings) {\n        if(!settings.list) settings.list = [];\n        if(!settings.cb) settings.cb = function emptyCb() {};\n        if(!settings.thisArg) settings.thisArg = null;\n        if(!settings.args) settings.args = [];\n        if(!settings.index) settings.index = 0;\n        \n        settings.args.push(runNext);\n        \n    }\n    \n"],[0,"    return {"]],"start1":2226,"start2":2226,"length1":24,"length2":555}]],"length":2966,"saved":false}
{"ts":1358889706643,"patch":[[{"diffs":[[0,"    if(!"],[1,"has("],[0,"settings"],[-1,"."],[1,", '"],[0,"list"],[1,"')"],[0,") settin"]],"start1":2448,"start2":2448,"length1":29,"length2":37},{"diffs":[[0,"    if(!"],[1,"has("],[0,"settings"],[-1,".cb"],[1,", 'cb')"],[0,") settin"]],"start1":2503,"start2":2503,"length1":27,"length2":35},{"diffs":[[0,"    if(!"],[1,"has("],[0,"settings"],[-1,"."],[1,", '"],[0,"thisArg"],[1,"')"],[0,") settin"]],"start1":2573,"start2":2573,"length1":32,"length2":40},{"diffs":[[0,"    if(!"],[1,"has("],[0,"settings"],[-1,"."],[1,", '"],[0,"args"],[1,"')"],[0,") settin"]],"start1":2636,"start2":2636,"length1":29,"length2":37},{"diffs":[[0,"    if(!"],[1,"has("],[0,"settings"],[-1,"."],[1,", '"],[0,"index"],[1,"')"],[0,") settin"]],"start1":2691,"start2":2691,"length1":30,"length2":38}]],"length":3006,"saved":false}
{"ts":1358890019578,"patch":[[{"diffs":[[0,"t);\n        "],[1,"runNext();\n        \n        function runNext()\n        {\n            if(settings.index == -1 || settings.index >= settings.list.length) return settings.cb();\n            var fn = settings.list[settings.index++];\n            fn.apply(settings.thisArg, settings.args);\n        }"],[0,"\n    }\n    \n"]],"start1":2785,"start2":2785,"length1":24,"length2":300}]],"length":3282,"saved":false}
{"ts":1358890416038,"patch":[[{"diffs":[[0,"    "],[-1,"execute({"],[1,"runInt();"],[0,"\n    "],[1,"}\n"],[0,"    "],[1,"\n"],[0,"    "],[-1,"cb: runItem,\n            list: starts"],[1,"function runInt() {\n        execute({\n            list: starts,\n            cb: runItem"],[0,"\n   "]],"start1":2324,"start2":2324,"length1":67,"length2":120},{"diffs":[[0,"\n    }\n    \n"],[1,"    function runItem()\n    {\n        if(queue.length == 0) return execute({\n            list: stops,\n            cb: ensureEmpty\n        });\n        \n        \n    }\n    \n"],[0,"    return {"]],"start1":3126,"start2":3126,"length1":24,"length2":194}]],"length":3505,"saved":false}
{"ts":1358890611922,"patch":[[{"diffs":[[0,"   \n        "],[1,"var item = queue.shift();\n        item.list = pipes;\n        item.args = [item.state];\n        item.cb = runItem;\n        item.thisArg = {\n            skip: skip\n        };\n        execute(item);\n        \n        function skip() {\n            item.index = -1;\n        }"],[0,"\n    }\n    \n"]],"start1":3284,"start2":3284,"length1":24,"length2":293}]],"length":3774,"saved":false}
{"ts":1358890720399,"patch":[[{"diffs":[[0,"\n    }\n    \n"],[1,"    function ensureEmpty()\n    {\n        if(queue.length > 0) return runInt();\n        \n        running = false;\n        for(var i = 0, l = once.length; i < l; i++) {\n            once[i]();\n        }\n        once = [];\n    }\n    \n"],[0,"    return {"]],"start1":3565,"start2":3565,"length1":24,"length2":254}]],"length":4004,"saved":false}
{"ts":1358890750368,"patch":[[{"diffs":[[0,"ength =="],[1,"="],[0," 0) retu"]],"start1":3185,"start2":3185,"length1":16,"length2":17}]],"length":4005,"saved":false}
{"contributors":[],"silentsave":false,"ts":1358893472782,"patch":[[{"diffs":[[1,"!function() {\n\n"],[0,"function Pipelin"]],"start1":0,"start2":0,"length1":16,"length2":31},{"diffs":[[0,"\n    }\n}"],[1,"\n\nif(typeof module !== \"undefined\") { module.exports = Pipeline; }\nelse { window.Pipeline = Pipeline; }\n\n}();"]],"start1":4012,"start2":4012,"length1":8,"length2":117}]],"length":4129,"saved":false}
{"ts":1358893572032,"patch":[[{"diffs":[[0,"te\n    }"],[1,";"],[0,"\n}\n\nif(t"]],"start1":4010,"start2":4010,"length1":16,"length2":17}]],"length":4130,"saved":false}
{"ts":1358893637018,"patch":[[{"diffs":[[0,"rn pipeAsync"],[-1,"("],[1,".apply(this, ["],[0,"\n           "]],"start1":946,"start2":946,"length1":25,"length2":38},{"diffs":[[0,"      }\n        "],[1,"]"],[0,");\n    }\n    \n  "]],"start1":1098,"start2":1098,"length1":32,"length2":33},{"diffs":[[0,"n startAsync"],[-1,"("],[1,".apply(this, ["],[0,"\n           "]],"start1":1306,"start2":1306,"length1":25,"length2":38},{"diffs":[[0,"          }\n"],[-1,""],[0,"        "],[1,"]"],[0,");\n    }\n   "]],"start1":1444,"start2":1444,"length1":32,"length2":33}]],"length":4158,"saved":false}
{"ts":1358893670670,"patch":[[{"diffs":[[0,"topAsync"],[-1,"("],[1,".apply(this, ["],[0,"\n       "]],"start1":1653,"start2":1653,"length1":17,"length2":30},{"diffs":[[0,"  }\n        "],[1,"]"],[0,");\n    }\n   "]],"start1":1793,"start2":1793,"length1":24,"length2":25}]],"length":4172,"saved":false}
{"ts":1358894080872,"patch":[[{"diffs":[[0,"        "],[-1,"window."],[0,"setTimeo"]],"start1":2022,"start2":2022,"length1":23,"length2":16},{"diffs":[[0,"        "],[1,"setTimeout("],[0,"runInt"],[-1,"("],[1,", 1"],[0,");\n    }"]],"start1":2370,"start2":2370,"length1":23,"length2":36}]],"length":4178,"saved":false}
{"ts":1358894623532,"patch":[[{"diffs":[[0,"ue.shift();\n"],[1,"        console.log(item);\n"],[0,"        item"]],"start1":3374,"start2":3374,"length1":24,"length2":51}]],"length":4205,"saved":false}
{"ts":1358894654115,"patch":[[{"diffs":[[0,"();\n"],[-1,"        console.log(item);\n"],[0,"    "]],"start1":3382,"start2":3382,"length1":35,"length2":8}]],"length":4178,"saved":false}
{"ts":1358894668733,"patch":[[{"diffs":[[0,"skip\n        };\n"],[1,"        console.log(item.args);\n"],[0,"        execute("]],"start1":3517,"start2":3517,"length1":32,"length2":64}]],"length":4210,"saved":false}
{"ts":1358894714758,"patch":[[{"diffs":[[0," };\n"],[-1,"        console.log(item.args);\n"],[0,"    "]],"start1":3529,"start2":3529,"length1":40,"length2":8}]],"length":4178,"saved":false}
{"ts":1358894720522,"patch":[[{"diffs":[[0,"h(runNext);\n"],[1,"        console.log(item.args);\n"],[0,"        runN"]],"start1":2893,"start2":2893,"length1":24,"length2":56}]],"length":4210,"saved":false}
{"ts":1358894751214,"patch":[[{"diffs":[[0,"ole.log("],[-1,"item"],[1,"settings"],[0,".args);\n"]],"start1":2917,"start2":2917,"length1":20,"length2":24}]],"length":4214,"saved":false}
{"ts":1358894777584,"patch":[[{"diffs":[[0,"t);\n"],[-1,"        console.log(settings.args);\n"],[0,"    "]],"start1":2901,"start2":2901,"length1":44,"length2":8}]],"length":4178,"saved":false}
{"ts":1358894790722,"patch":[[{"diffs":[[0,"pe(state, cb) {\n"],[1,"                console.log(state);\n"],[0,"                "]],"start1":1005,"start2":1005,"length1":32,"length2":68}]],"length":4214,"saved":false}
{"ts":1358894818991,"patch":[[{"diffs":[[0,"runPipe("],[-1,"i"],[1,"sta"],[0,"te"],[-1,"m"],[0,", cb) {\n"]],"start1":773,"start2":773,"length1":20,"length2":21},{"diffs":[[0,"(this, ["],[-1,"item."],[0,"state, c"]],"start1":820,"start2":820,"length1":21,"length2":16}]],"length":4210,"saved":false}
{"ts":1358894830297,"patch":[[{"diffs":[[0,"ush("],[-1,"\n            function runPipe(state, cb) {\n                pipe.apply(this, [state, cb]);\n            }\n        "],[1,"pipe"],[0,");\n "]],"start1":747,"start2":747,"length1":120,"length2":12}]],"length":4102,"saved":false}
{"ts":1358894857272,"patch":[[{"diffs":[[0,") {\n"],[-1,"                console.log(state);\n"],[0,"    "]],"start1":905,"start2":905,"length1":44,"length2":8}]],"length":4066,"saved":false}
{"ts":1358895308518,"patch":[[{"diffs":[[0,"        once"],[1,"s"],[0," = [],\n     "]],"start1":98,"start2":98,"length1":24,"length2":25},{"diffs":[[0,"    once"],[1,"s"],[0,".push(cb"]],"start1":2025,"start2":2025,"length1":16,"length2":17},{"diffs":[[0,"l = once"],[1,"s"],[0,".length;"]],"start1":3667,"start2":3667,"length1":16,"length2":17},{"diffs":[[0,"    once"],[1,"s"],[0,"[i]();\n "]],"start1":3707,"start2":3707,"length1":16,"length2":17},{"diffs":[[0,"    once"],[1,"s"],[0," = [];\n "]],"start1":3737,"start2":3737,"length1":16,"length2":17}]],"length":4071,"saved":false}
{"ts":1358895755685,"patch":[[{"diffs":[[0,"running)"],[1," return"],[0," cb();\n "]],"start1":1994,"start2":1994,"length1":16,"length2":23}]],"length":4078,"saved":false}
{"ts":1358896442638,"patch":[[{"diffs":[[0,"    "],[-1,"var fn = settings.list[settings.index++]"],[1,"\n            var current = settings.index++;\n            var fn = settings.list[current];\n            settings.current = current"],[0,";\n  "]],"start1":2976,"start2":2976,"length1":48,"length2":136},{"diffs":[[0,"= -1;\n        }\n"],[1,"        \n        function redo() {\n            item.index = item.current;\n        }\n"],[0,"    }\n    \n    f"]],"start1":3599,"start2":3599,"length1":32,"length2":116}]],"length":4250,"saved":false}
{"ts":1358896530974,"patch":[[{"diffs":[[0,"ip: skip"],[1,",\n            redo: redo"],[0,"\n       "]],"start1":3498,"start2":3498,"length1":16,"length2":40}]],"length":4274,"saved":false}
{"ts":1358896818932,"patch":[[{"diffs":[[0,"     }\n        \n"],[1,"        function lengt\n        \n"],[0,"        commit.o"]],"start1":2107,"start2":2107,"length1":32,"length2":64}]],"length":4306,"saved":false}
{"ts":1358896825790,"patch":[[{"diffs":[[0,"on lengt"],[1,"h(cb) {\n            return \n        }"],[0,"\n       "]],"start1":2137,"start2":2137,"length1":16,"length2":53}]],"length":4343,"saved":false}
{"ts":1358896827058,"patch":[[{"diffs":[[0,"ed = false;\n"],[-1,"        "],[0,"\n"],[1,""],[0,"    var queu"]],"start1":131,"start2":131,"length1":33,"length2":25},{"diffs":[[0," false;\n"],[-1,"        "],[0,"\n"],[1,""],[0,"    var "]],"start1":181,"start2":181,"length1":25,"length2":17},{"diffs":[[0,"     };\n"],[-1,"        "],[0,"\n"],[1,""],[0,"    func"]],"start1":513,"start2":513,"length1":25,"length2":17},{"diffs":[[0,"d.');\n    }\n"],[-1,"        "],[0,"\n"],[1,""],[0,"    function"]],"start1":620,"start2":620,"length1":33,"length2":25},{"diffs":[[0,"tCreated();\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        pipe"]],"start1":680,"start2":680,"length1":33,"length2":25},{"diffs":[[0,"urn this;\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function pip"]],"start1":730,"start2":730,"length1":37,"length2":33},{"diffs":[[0,"      ]);\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function sta"]],"start1":953,"start2":953,"length1":37,"length2":33},{"diffs":[[0,"tCreated();\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        star"]],"start1":1019,"start2":1019,"length1":33,"length2":25},{"diffs":[[0,"urn this;\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function sta"]],"start1":1071,"start2":1071,"length1":37,"length2":33},{"diffs":[[0,"      ]);\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function sto"]],"start1":1287,"start2":1287,"length1":37,"length2":33},{"diffs":[[0,"tCreated();\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        stop"]],"start1":1351,"start2":1351,"length1":33,"length2":25},{"diffs":[[0,"urn this;\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function sto"]],"start1":1401,"start2":1401,"length1":37,"length2":33},{"diffs":[[0,"      ]);\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function cre"]],"start1":1612,"start2":1612,"length1":37,"length2":33},{"diffs":[[0,"= true;\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        "]],"start1":1669,"start2":1669,"length1":25,"length2":17},{"diffs":[[0,";\n        }\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        func"]],"start1":1770,"start2":1770,"length1":33,"length2":25},{"diffs":[[0,";\n        }\n"],[-1,"        "],[0,"\n        fun"]],"start1":2006,"start2":2006,"length1":32,"length2":24},{"diffs":[[0," length("],[-1,"cb"],[0,") {\n    "]],"start1":2035,"start2":2035,"length1":18,"length2":16},{"diffs":[[0,"  return"],[-1," "],[0,"\n       "]],"start1":2057,"start2":2057,"length1":17,"length2":16},{"diffs":[[0,"n\n        }\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        comm"]],"start1":2064,"start2":2064,"length1":33,"length2":25},{"diffs":[[0,"n commit;\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function run"]],"start1":2118,"start2":2118,"length1":37,"length2":33},{"diffs":[[0,"return;\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        "]],"start1":2176,"start2":2176,"length1":25,"length2":17},{"diffs":[[0,"nInt, 1);\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function run"]],"start1":2230,"start2":2230,"length1":37,"length2":33},{"diffs":[[0,"  });\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function"]],"start1":2345,"start2":2345,"length1":29,"length2":25},{"diffs":[[0,"ex = 0;\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        "]],"start1":2682,"start2":2682,"length1":25,"length2":17},{"diffs":[[0," runNext();\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        func"]],"start1":2735,"start2":2735,"length1":33,"length2":25},{"diffs":[[0,"();\n"],[-1,"            "],[0,"\n"],[1,""],[0,"    "]],"start1":2882,"start2":2882,"length1":21,"length2":9},{"diffs":[[0,"        }\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function run"]],"start1":3071,"start2":3071,"length1":37,"length2":33},{"diffs":[[0,"    });\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        "]],"start1":3222,"start2":3222,"length1":25,"length2":17},{"diffs":[[0,"(item);\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        "]],"start1":3451,"start2":3451,"length1":25,"length2":17},{"diffs":[[0,"      }\n"],[-1,"        "],[0,"\n"],[1,""],[0,"        "]],"start1":3517,"start2":3517,"length1":25,"length2":17},{"diffs":[[0,"    }\n    }\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    function"]],"start1":3595,"start2":3595,"length1":29,"length2":25},{"diffs":[[0,"();\n"],[-1,"        "],[0,"\n"],[1,""],[0,"    "]],"start1":3683,"start2":3683,"length1":17,"length2":9},{"diffs":[[0,";\n    }\n"],[-1,"    "],[0,"\n    ret"]],"start1":3820,"start2":3820,"length1":20,"length2":16}]],"length":4136,"saved":false}
{"ts":1358896827897,"patch":[[{"diffs":[[0,"  return"],[1," "],[0,"\n       "]],"start1":2057,"start2":2057,"length1":16,"length2":17}]],"length":4137,"saved":false}
{"ts":1358896828520,"patch":[[{"diffs":[[0,"  return"],[-1," "],[0,"\n       "]],"start1":2057,"start2":2057,"length1":17,"length2":16}]],"length":4136,"saved":false}
{"ts":1358896829175,"patch":[[{"diffs":[[0,"  return"],[1," "],[0,"\n       "]],"start1":2057,"start2":2057,"length1":16,"length2":17}]],"length":4137,"saved":false}
{"ts":1358896836902,"patch":[[{"diffs":[[0," return "],[1,"queue.leng"],[0,"\n       "]],"start1":2058,"start2":2058,"length1":16,"length2":26}]],"length":4147,"saved":false}
{"ts":1358896842402,"patch":[[{"diffs":[[0,"eue.leng"],[1,"th;"],[0,"\n       "]],"start1":2068,"start2":2068,"length1":16,"length2":19}]],"length":4150,"saved":false}
{"ts":1358896846281,"patch":[[{"diffs":[[0,"= once;\n"],[1,"        commit.length\n"],[0,"        "]],"start1":2111,"start2":2111,"length1":16,"length2":38}]],"length":4172,"saved":false}
{"ts":1358896851814,"patch":[[{"diffs":[[0,"t.length"],[1," = length;"],[0,"\n       "]],"start1":2132,"start2":2132,"length1":16,"length2":26}]],"length":4182,"saved":false}
{"ts":1358896870122,"patch":[[{"diffs":[[0,"unction "],[-1,"length"],[1,"backlog"],[0,"() {\n   "]],"start1":2028,"start2":2028,"length1":22,"length2":23}]],"length":4183,"saved":false}
{"ts":1358896875882,"patch":[[{"diffs":[[0,"mit."],[-1,"length = length"],[1,"backlog = backlog"],[0,";\n  "]],"start1":2131,"start2":2131,"length1":23,"length2":25}]],"length":4185,"saved":false}
